#include <stdio.h>
#include <stdlib.h>
#include "tp4.h"

static void purger(void)

{
    int c;


    while ((c = getchar()) != '\n' && c != EOF)

    {}

}


void main()
{
    int choix, b, CID, annee;
    char nom[NMAX], prenom[NMAX];
    char sexe=' ';
    Benevole *ben;
    Tranche *abr=NULL;
    extern ListeTranche *l;
    Tranche *ty;
    do
    {
    printf("Que voulez vous faire ? : \n1 : Initialiser un arbre\n2 : Ajouter une tranche\n3 : Ajouter un benevole\n4 : Afficher les tranches d'ages\n5 : Afficher les benevoles\n6 : Supprimer un benevole\n7 : Supprimer une tranche\n8 : Afficher les benevoles d'honneur\n9 : Afficher le nombre total de benevoles\n10 : Actualiser l'ABR\n11 : Afficher le pourcentage de benevoles d'une tranche d'age\n12 : Detruire l'arbre\n13 : Quitter \n");
    scanf("%d", &choix);
    switch(choix)
    {
        case 1 : abr=NULL;
                 break;

        case 2 :    printf("Quelle borne sup ? \n");  //OK
                    scanf("%d", &b);
                    abr=ajoutTranche(abr, b);
                    break;

        case 3 :
                 /*printf("saisir le nom\n");
                 scanf("%s", nom);
                 printf("saisir le prenom\n");
                 scanf("%s", prenom);
                 printf("saisir le sexe\n");
                 purger();
                 scanf("%c", &sexe);
                 printf("saisir le CID\n");
                 scanf("%d", &CID);
                 printf("saisir l'annee de naissance\n");
                 scanf("%d", &annee); */
                 ben=nouveauBen("tr", "prenom", 789, 'f',2006);
                 printf("nouveau 1\n");
                 insererBen(abr, ben);
                 /*printf("insere 1\n");
                 ben=nouveauBen("pr", "prnom", 4579, 'm',1986);
                 printf("nouveau 2\n");
                 insererBen(abr, ben);
                 printf("insere 2\n");*/
                 break;

        case 4 : printf("Voici l'arbre dans l'ordre decroissant : \n \n");  //plutot faire dans l'ordre croissant non ? ils veulent une liste triée
                 afficherArbre(abr);
                 printf("\n");

                 break;

        case 5 : printf("Quelle borne sup ?\n");  //OK
                 scanf("%d", &b);
                 afficherTranche(abr, b);
                 break;

        case 6 : printf("Quel CIN puis quelle annee de naissance?\n");
                 scanf("%d %d", &CID, &annee);
                 supprimerBen(abr, CID, annee);
                 break;

        case 7 : printf("Quelle borne sup ?\n");
                 scanf("%d", &b);
                 supprimerTranche(abr, b);
                 afficherArbre(abr);
                 break;

        /*case 8 : ListBenevoles *l;
                 l =BenDhonneur(abr);
                 Benevole *tmp=l->premier;
                 afficherBen(tmp);
                 break;*/

        case 9 : printf("Nombre total de benevoles : %d\n", totalBen(abr));
                 break;

        case 10 : printf("Nombre de benevoles actualisés : %d\n", actualiser(abr));
                  break;

        case 11 :
                  printf("Quelle borne sup ?\n");
                  scanf("%d", &b);
                  printf("Pourcentage de benevoles entre %d ans et %d ans : %f \n", b-4, b, pourcentageTranche(abr, b));
                  break;

        case 12 : detruire_Arbre(abr);
                    if (abr == NULL)
                 {

                  printf("L'arbre a bien ete supprime ! \n");
                 }
                 // abr = NULL;   //pas d'autre solution pour le moment
                  break;


        case 13 : printf("Au revoir\n");
                  break;


        default : printf("Nombre non reconnu \n");
                  break;

    }
    } while(choix!=13);
}
